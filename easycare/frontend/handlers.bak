
     def ask_weight(self):
        weight = self.session.playAndGetDigits(
            1, 5, 3, 5000, "#",
            os.path.join(VOICE_PATH, 'weight', '2.wav'),
            os.path.join(VOICE_PATH, 'fail.wav'),
            "" )                
        if weight:  
            weight_int, weight_dec = re.match(r"(\d+)\*?(\d+)?", weight).group(1), re.match(r"(\d+)\*?(\d+)?", weight).group(2)
            if weight_dec:
                self.weight['weight'] = weight_int + '.' + weight_dec
            else:
                self.weight['weight'] = weight_int
            self.session.streamFile(os.path.join(VOICE_PATH, 'thankyou.wav'))
            return self.weight
        else:
            return None


    def ask_pressure(self):
        self.pressure[period] = {}
        prompt_audio = VOICE_PATH + "/pressure-1.wav"
        error_audio = VOICE_PATH + "/fail.wav"
        response = self.session.playAndGetDigits(1, 1, 3, 5000, "", prompt_audio, error_audio, "[123]")
        
        if response:
            if response == "1":
                prompt_audio = VOICE_PATH + "/pressure-3-1.wav"
                error_audio = VOICE_PATH + "/fail.wav"
                pressure_up = self.session.playAndGetDigits(1, 5, 3, 5000, "#", prompt_audio, error_audio, "")
                            
                if pressure_up:
                    self.pressure[period]['up'] = int(pressure_up)
                    self.session.streamFile(VOICE_PATH + "/thankyou.wav")
                                
                    prompt_audio = VOICE_PATH + "/pressure-4-1.wav"
                    error_audio = VOICE_PATH + "/fail.wav"
                    pressure_down = self.session.playAndGetDigits(1, 5, 3, 5000, "#", prompt_audio, error_audio, "")
                                
                    if pressure_down:
                        self.pressure[period]['down'] = int(pressure_down)
                        self.session.streamFile(VOICE_PATH + "/thankyou.wav")
                        self.ask_drug(period='morning')
            elif response == "2":
                self.ask_drug(period='morning')
            elif response == "3":
                self.ask_weight(period='morning')

    def ask_drug(self, period):
        self.drug[period] = {}
        prompt_audio = VOICE_PATH + "/drug-1.wav"
        error_audio = VOICE_PATH + "/fail.wav"
        response = self.session.playAndGetDigits(1, 1, 3, 5000, "", prompt_audio, error_audio, "[123]")

        if response:                
            if response == "1":
                #have drug
                prompt_audio = VOICE_PATH + "/drug-2.wav"
                error_audio = VOICE_PATH + "/fail.wav"
                drug = self.session.playAndGetDigits(1, 1, 3, 5000, "", prompt_audio, error_audio, "[123]")
                
                if drug:
                    if drug == "1":
                        #get drug size
                        prompt_audio = VOICE_PATH + "/drug-2-1.wav"
                        error_audio = VOICE_PATH + "/fail.wav"
                        drug_size = self.session.playAndGetDigits(1, 5, 3, 5000, "#", prompt_audio, error_audio, "")
                        
                        if drug_size:
                            self.drug[period]['size'] = int(drug_size)
                            self.session.streamFile(VOICE_PATH + "/thankyou.wav")
                            
                            #get drug amount
                            prompt_audio = VOICE_PATH + "/drug-2-2.wav"
                            error_audio = VOICE_PATH + "/fail.wav"
                            drug_amount = self.session.playAndGetDigits(1, 5, 3, 5000, "#", prompt_audio, error_audio, "")
                            
                            if drug_amount:
                                drug_amount_int, drug_amount_dec = re.match(r"(\d+)\*?(\d+)?", drug_amount).group(1), re.match(r"(\d+)\*?(\d+)?", drug_amount).group(2)
                                if drug_amount_dec:
                                    drug_amount = drug_amount_int + '.' + drug_amount_dec
                                else:
                                    drug_amount = drug_amount_int
                                self.drug[period]['amount'] = Decimal(drug_amount)
                                self.session.streamFile(VOICE_PATH + "/thankyou.wav")
                                pass
                    elif response_morning_drug == "2":
                        pass
            elif response == "2":
                #next menu
                pass
            elif response == "3":
                #previous menu
                pass